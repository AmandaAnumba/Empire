var index=angular.module("index",["index.directives"]);angular.module("index.directives",[]).directive("pwCheck",[function(){return{require:"ngModel",link:function(a,b,c,d){var e="#"+c.pwCheck;b.add(e).on("keyup",function(){a.$apply(function(){d.$setValidity("pwmatch",b.val()===$(e).val())})})}}}]),index.controller("loginFormController",function(a,b){a.formData={},a.login=function(){b.post("/login",{data:a.formData}).success(function(a){if(a.error&&($(".error_msg#log > .message").empty().append(a.error),$(".error_msg#log").show()),a.success){var b={id:a.uID,avatarUrl:"none",authorUrl:"http://www.empire.life/_"+a.username,name:a.username,sessionType:a.sessionType};localStorage.setItem("currentUser",JSON.stringify(b)),window.location="/"}}).error(function(){$(".error_msg#log > .message").empty().append("<strong>Error: </strong>Please refresh the page and try again."),$(".error_msg#log").show()})}}),index.controller("registerFormController",function(a,b){a.formData={},a.register=function(){console.log(a.formData),b.post("/register",{register:a.formData}).success(function(a){console.log(a),a.error&&($(".error_msg#reg > .message").empty().append(a.error),$(".error_msg#reg").show()),a.success&&(window.location="/profile")}).error(function(a){console.log(a),$(".error_msg#reg > .message").empty().append("<strong>Error: </strong>Please refresh the page and try again."),$(".error_msg#reg").show()})}}),index.controller("forgotFormController",function(a,b){a.formData={},a.forgot=function(){console.log(a.formData.email),b.post("/forgot",{email:a.formData.email}).success(function(a){console.log(a),a.error&&($(".error_msg.forgot > .message").empty().append(a.error),$(".error_msg.forgot").show()),a.success&&($(".success_msg.forgot > .message").empty().append(a.success),$(".success_msg.forgot").show())}).error(function(){$(".error_msg.forgot > .message").empty().append("<strong>Error: </strong>Please refresh the page and try again."),$(".error_msg.forgot").show()})}});